{% extends "base_report.html" %}

{% block content %}

    <div style="display: inline-block;">
    <div class="left">
    <h2>Create Group Token URL for Experiment: {{ exp_name }}</h2>
    <form action="#" method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <fieldset> {{ form.as_p }} <input type="submit" value="Create" /> </fieldset>

        {% comment %}
        <fieldset>
            <div class="fieldWrapper">
                {{ form.appletName.errors }}
                <label for="{{ form.appletName.id_for_label }}">Applet for this Experiment:</label>
                {{ form.appletName }}
            </div>
            <div class="fieldWrapper">
                {{ form.numTokens.errors }}
                <label for="{{ form.numTokens.id_for_label }}">Number of participants:</label>
                {{ form.numTokens }}
            </div>
            <div class="fieldWrapper">
                {{ form.studyName.errors }}
                <label for="{{ form.studyName.id_for_label }}">Study that provides consent information:</label>
                {{ form.studyName }}
            </div>
            {% if form.priorTokens %}
                <div class="fieldWrapper">
                    {{ form.priorTokens.errors }}
                    <label for="{{ form.priorTokens.id_for_label }}">Add to token group:</label>
                    {{ form.priorTokens }}
                </div>
            {% endif %}
        </fieldset>
        <fieldset>
            <div class="fieldWrapper">
                <p><b>Direct invite participants by url</b></p>
                {{ formparticipantList.errors }}
                <label for="{{ form.participantList.id_for_label }}">List of participant names:</label>
                {{ form.participantList }}
            </div>
        </fieldset>
        {% endcomment %}

    </form>
    </div>

    <div class="right">
    <h3>Notes:</h3>
        <ul>
            <li>Urls to launch the experiment app with the session token passed will be generated by default</li>
            <li>Provide a list of participant names and individual group token URLs will be generated</li>
            <li>Add all cfgs overrides the number of cfgs to add</li>
            <li>Re-add cfgs if recycle is false to allow more participants</li>
            <li>Only administer new if adding to a group to restrict participants to these cfgs</li>
        </ul>
    </div>
    </div>
    <div>

    {% if priorLinks %}
        <p>Prior token groups for {{ exp_name }}</p>
        <table><tr><th>Group Token</th><th>Number of Sessions</th><th>Session Tokens</th></tr>
        {% for g in priorLinks %}
            <tr><td><a href="{% url 'token_status' g.groupToken %}">{{ g.groupToken }}</a></td><td align="center">{{ g.numTokens }}</td><td>{{ g.groupSessions }}</td></tr>
        {% endfor %}
        </table>
    {% endif %}

    <hr>
    <p>Session list for {{ exp_name }}</p>
    {% for s in sessions %}
        <li>{{ s.name }}</li>
    {% empty %}
        <p>None available</p>
    {% endfor %}

    <p>Sessions with data (won't be linked)</p>
    {% for s in skipped %}
        <li>{{ s.name }}</li>
    {% empty %}
        <p>None yet</p>
    {% endfor %}
    </div>
{% endblock %}